#+TITLE: Majutsu NEWS -- History of notable and user-visible changes
#+AUTHOR: 0WD0

* [Unreleased]

** Performance

- Significant improvements to diff view rendering speed and memory usage.
  - Implemented "washing" to parse =jj diff= output directly in the buffer.
  - Added lazy font-locking (JIT) for diff highlighting.
  - Whitespace painting is now disabled for very large hunks to preserve responsiveness.

** Added

- New options to control performance limits: ~majutsu-diff-whitespace-max-chars~ and ~majutsu-diff-whitespace-max-bytes~.
- Support for global `--ignore-immutable` flag in rebase, squash, new, and bookmark transients.
- Support for `--ignore-immutable` in ~majutsu-describe~ via prefix argument (~C-u~).
- Magit-style per-repository process buffer (~$~, ~majutsu-process-buffer~) for inspecting jj command output and failures.

** Changed

- Removed deprecated `--allow-new` flag from ~majutsu-git-push~.
- ~majutsu-git-push~ now suggests `jj bookmark track` when pushing new bookmarks.
- Keybinding of ~majutsu-abandon~ changed from ~k~ to ~k~ / ~a~.
- Renamed ~majutsu--run-command-*~ to ~majutsu-run-jj-*~.

* [0.3.0] - 2025-11-25

** Added

- Native evil support.
- Add asynchronous support for ~majutsu-log~, ~majutsu-diff~, ~majutsu-git-fetch~ and ~majutsu-git-push~.
- Basic ~majutsu-op-log~ implementation.
- Added ~majutsu-hack-dir-local-variables~, ignore trailing whitespace in majutsu buffers.
- ~majutsu-rebase-transient~ now can toggle source and destination argument type (~-b~ ~-r~ ~-s~ / ~-o~ ~-A~ ~-B~).
- ~tpl-compile~ (main entry of ~majutsu-template~) add a optional ~self-type~ argument.
- Bound ~majutsu-diff~ to ~d~.

** Changed

- Keybinding of ~majutsu-describe~ changed from ~d~ to ~c~.
- Keybinding of ~majutsu-commit~ changed from ~c~ to ~C~.
- Keybinding of ~majutsu-undo~ changed from ~u~ to ~C-/~.
- Keybinding of ~majutsu-redo~ changed from ~R~ to ~C-?~.
- Keybinding of ~majutsu-abandon~ changed from ~a~ to ~k~.
- Renamed ~majutsu-mode-transient~ to ~majutsu-dispatch~.
- Renamed ~majutsu-goto-current~ to ~majutsu-log-goto-@~.

** Fixed

- ~majutsu-log-got-@~ works based on output of =jj log= command.
- Keyword parsing in ~majutsu-template~ respects zero argument method chains.

* [0.2.0] - 2025-11-20

** Added

- Added a confirm action customization for abandon/redo/undo.
- Added ~majutsu-diff-transient~.
- Added ~majutsu-new-transient~.
- Added ~majutsu-duplicate-transient~.
- Added revset, line limit and path filter argument for ~majutsu-log-transient~.
- Added support for =jj bookmark move --allow-backwards=.
  Use ~m~ in ~majutsu-bookmark-transient~ to denote commands without flags,
  and use ~M~ for commands that include =--allow-backwards=.

** Changed

- Depend on with-editor.
- ~majutsu-diff~ and ~majutsu-describe~ now can run outside of majutsu-log buffer.
- ~majutsu-log-refresh~ tracks the section from before the refresh to keep the visuals consistent.

** Fixed

- Fixed an issue where diff sections couldn’t be toggled/collapsed.
- Don’t strip leading spaces when parsing log graphs.
- Prefer change ID, and for divergent commits (with "??" as suffix) fallback to commit ID.

* [0.1.0] - 2025-10-15

** Added

- forked form [[https://github.com/bolivier/jj-mode.el][bolivier/jj-mode.el]]
- ~majutsu-template~
